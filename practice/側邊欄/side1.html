<!-- https://codepen.io/codepenplayer/pen/dyxORKB -->

<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>側邊欄 1</title>
	
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
		integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
	
	<style>
		
		body {
			padding-bottom: 50px;
		}
		ul > li {
			margin-bottom: 10px;
		}
		
		.side, .container {
			border: 2px solid orange;
			padding: 20px 15px 5px;
		}

		.side {
			width: 296px;
			height: 100dvh;
			overflow: auto;
			position: fixed;
		}
		.side:not(.show) {
			display: none;
		}
		
		div.container {
			padding-left: 30px;
			padding-right: 30px;
			margin-left: 303px;
			max-width: calc(100% - 303px - 24px);
		}
		.container.expand {
			margin-left: auto;
			margin-right: auto;
			max-width: calc(100% - 48px);
		}
		
	</style>
</head>

<body>
	
	<div class="side show">
		<h2>側邊欄</h2>
		<p class="fs-4">
			使用 position fixed 固定
		</p>
		<p>
			Lorem ipsum dolor sit amet consectetur adipisicing elit. Doloribus qui corporis odit quo placeat. Eligendi impedit, repellendus excepturi ad quidem, dolorem atque molestiae dolores odit cum, placeat similique maiores praesentium quos minima laborum itaque ut asperiores corporis. Cum, neque voluptate. Distinctio itaque odit quasi voluptate ea repudiandae fuga dolorem asperiores aspernatur placeat, eligendi iure dolor. Sapiente facilis perferendis cumque deserunt. Eveniet ipsa fugiat vero commodi eius modi fugit ea ad asperiores. Nam animi ratione neque fugiat, veritatis, delectus odio, voluptates odit illum libero illo quam accusantium officiis recusandae. Sit minima placeat neque rem dolores voluptates eligendi soluta maiores facilis enim?
			Lorem ipsum dolor sit amet consectetur adipisicing elit. Quod mollitia ea cupiditate.
			Lorem ipsum dolor sit amet consectetur adipisicing elit. Perspiciatis beatae at odit quo a velit porro ipsam dignissimos numquam aut rem tenetur excepturi rerum molestias doloremque ullam amet, fugit blanditiis iure molestiae. Rem quisquam aut animi voluptatibus! Vel eligendi repellendus reiciendis inventore? Deleniti sequi possimus delectus asperiores laboriosam. Voluptates rerum, cum vitae quibusdam ratione impedit minima mollitia nostrum, aspernatur, repellendus nesciunt ipsa facere magnam aliquid enim necessitatibus laboriosam ex animi.<br>
			-- end
		</p>
	</div>
	
	<div class="container">
		
		<div class="d-flex justify-content-between mt-3 mb-4">
			<h2>主要內容</h2>
			<button type="button" id="btnShowHideSide" class="btn btn-primary">
				隱藏 / 顯示側邊欄
			</button>
		</div>
		
		<ul class="fs-4 mb-5">
			<li>側欄使用 <code>position: fixed;</code> 固定，會佔據固定的位置和空間；主內容需要使用 <code>margin-left</code> 推擠出供側欄放置的空間。</li>
			<li>顯示或隱藏側欄時，主內容不會自動縮放，必須另外使用 JS 控制。</li>
			<li>
				<p>當側邊欄的捲軸到底或頂的時候，會變成捲動主內容區塊。</p>
				<p class="fs-5">註：因為主內容區塊為整個 document。可以觀察到，元素本身的 scroll 到極限時，接著會影响 document 的 scroll。</p>
			</li>
		</ul>
		
		<p class="fs-4">
			Lorem ipsum dolor, sit amet consectetur adipisicing elit. Deserunt, facilis rerum consequuntur laborum quidem dolorum ex aperiam excepturi similique, possimus cumque atque aut placeat doloribus itaque beatae pariatur! Reprehenderit sint tempora quia exercitationem modi eum molestias voluptatibus, minus alias? Aut, ex deserunt! Suscipit dolorum maxime soluta? Soluta, aut culpa perspiciatis magnam sapiente voluptas excepturi ipsam nobis iste reiciendis voluptate possimus, minus est eligendi consectetur. Quia eaque ullam rem ea suscipit error, cum sit officia labore vel repudiandae, alias maiores ut? Quae veritatis eius corporis, itaque, vero corrupti voluptatum, quidem eos velit officiis iure. Accusantium numquam rerum sint possimus quibusdam dolore!
			Lorem ipsum dolor sit amet consectetur adipisicing elit. Exercitationem molestiae sit minima quisquam non fugit magni accusantium debitis labore perspiciatis, doloremque aut ipsam corporis porro delectus iusto eum, aliquid repudiandae distinctio repellendus nobis, inventore nostrum minus? Maxime quis explicabo at! Velit accusantium aliquam omnis debitis ipsam. Ipsa, sunt tempore fugiat minus eius maxime consequuntur quis aliquid vitae? Suscipit rerum animi provident. Dignissimos sunt accusantium ut sit, architecto esse quos harum! Nisi rerum commodi natus ullam odit? Ab corrupti cum pariatur omnis modi.<br>
			-- end
		</p>
	</div>
	
	
	<script>
		
		const elemSide = document.querySelector(".side");
		const elemContainer = document.querySelector(".container");
		// console.log(`elemContainer ==>`, elemContainer);
		
		document.querySelector("#btnShowHideSide").addEventListener("click", event => {
			console.log(`before ==>`, elemSide.classList.value, elemSide.classList.contains("show"));
			elemSide.classList.toggle("show");
			elemContainer.classList.toggle("expand");
			console.log(`after ==>`, elemSide.classList.value, elemSide.classList.contains("show"));
			console.log(``);
		});
		
		// 當側邊欄的捲軸到底或頂的時候，會變成捲動整個 document
		elemSide.addEventListener("scroll", event => {
			console.log("side scroll ==>", event.target.scrollTop);
		});
		document.addEventListener("scroll", event => {
			console.log(event.target);
			console.log("document scroll ==>", event.target.scrollingElement.scrollTop);
		});
		
	</script>
	
</body>

</html>